version: '3.8'

# Production docker-compose override
# Usage: docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d

services:
  backend:
    build:
      target: production
    environment:
      - APP_ENV=production
      - APP_DEBUG=false
      - RUN_MIGRATIONS=false
    volumes:
      # Remove source code mount for production
      - backend_storage:/var/www/html/storage
    # Use nginx + php-fpm in production (optional)
    # For simplicity, using artisan serve for now

  frontend:
    build:
      target: production
    environment:
      - VITE_API_URL=${VITE_API_URL:-https://api.your-domain.com/api}

